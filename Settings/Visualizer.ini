[Rainmeter]
Update=-1
OnWakeAction=[!Refresh]

[Variables]
@include2=#@#variables.ini
@include=#@#Variables.inc
BackButtonClick=[!ActivateConfig "ClockWorld\Settings" "Player.ini"]
Pathh=#ROOTCONFIGPATH#Music Player\Music Player.ini
Clipp=1
Vis=1
Dur=1
X=210

[FrostedGlass]
Measure=Plugin
Plugin=FrostedGlass
Type=Acrylic
Border=None

[MegaShape]
Meter=Shape
Shape=Rectangle 0, 0, 620, 500, 10, 10 | FillColor #CMode#,150 ; 1.0 | Stroke Color 255, 255, 255,0


[BottomShape]
Meter=Shape
Shape=Rectangle 0, 430, 620, 70, 10, 10 | FillColor #CMode#,255 ; 1.0 | Stroke Color 255, 255, 255,0

[XButton]
Meter=Image
ImageName=#@#Particles\Settings\Exit.png
X=585
Y=15
W=20
H=20
SolidColor=0,0,0,1
LeftMouseUpAction=[!DeactivateConfig]
ImageTint=#OMode#
MouseOverAction=[!CommandMeasure MeasureXButtonSize "Stop 2"][!CommandMeasure MeasureXButtonSize "Execute 1"]
MouseLeaveAction=[!CommandMeasure MeasureXButtonSize "Stop 1"][!CommandMeasure MeasureXButtonSize "Execute 2"]

[MeasureXButtonSize]
Measure=Plugin
Plugin=ActionTimer
ActionList1=Repeat ChangeImageSize,10,3
ChangeImageSize=[!SetOption XButton W "(Clamp([XButton:W]+2,20,26))"][!SetOption XButton H "(Clamp([XButton:H]+2,20,26))"][!SetOption XButton X "(Clamp([XButton:X]-1,582,585))"][!SetOption XButton Y "(Clamp([XButton:Y]-1,12,15))"][!Update][!UpdateMeter XButton][!Redraw]
ActionList2=Repeat ChangeImageSize1,10,3
ChangeImageSize1=[!SetOption XButton W "(Clamp([XButton:W]-2,20,26))"][!SetOption XButton H "(Clamp([XButton:H]-2,20,26))"][!SetOption XButton X "(Clamp([XButton:X]+1,582,585))"][!SetOption XButton Y "(Clamp([XButton:Y]+1,12,15))"][!Update][!UpdateMeter XButton][!Redraw]

[BackButton]
Meter=Image
ImageName=#@#Particles\Settings\Back.png
X=55
Y=55
W=25
H=25
LeftMouseUpAction=#BackButtonClick#
SolidColor=0,0,0,1
ImageTint=#OMode#
MouseOverAction=[!CommandMeasure MeasureBackButtonSize "Stop 2"][!CommandMeasure MeasureBackButtonSize "Execute 1"]
MouseLeaveAction=[!CommandMeasure MeasureBackButtonSize "Stop 1"][!CommandMeasure MeasureBackButtonSize "Execute 2"]

[MeasureBackButtonSize]
Measure=Plugin
Plugin=ActionTimer
ActionList1=Repeat ChangeImageSize,10,5
ChangeImageSize=[!SetOption BackButton W "(Clamp([BackButton:W]+2,25,35))"][!SetOption BackButton H "(Clamp([BackButton:H]+2,25,35))"][!SetOption BackButton X "(Clamp([BackButton:X]-1,50,55))"][!SetOption BackButton Y "(Clamp([BackButton:Y]-1,50,55))"][!Update][!UpdateMeter BackButton][!Redraw]
ActionList2=Repeat ChangeImageSize1,10,5
ChangeImageSize1=[!SetOption BackButton W "(Clamp([BackButton:W]-2,25,35))"][!SetOption BackButton H "(Clamp([BackButton:H]-2,25,35))"][!SetOption BackButton X "(Clamp([BackButton:X]+1,50,55))"][!SetOption BackButton Y "(Clamp([BackButton:Y]+1,50,55))"][!Update][!UpdateMeter BackButton][!Redraw

[BigText]
Meter=String
Text=Visualizer
FontFace=Summer Loving
FontSize=60
FontColor=#Accent#
StringAlign=Center
AntiAlias=1
X=310
Y=10
InlineSetting=CharacterSpacing | 1 | 1

[Tickon1]
Meter=Shape
Shape=Rectangle 290,110,53,24,13 | Fill Color #Accent# | StrokeWidth 0
Shape2=Ellipse 330,122,6 | FillColor 255,255,255 | StrokeWidth 0
Hidden=1
LeftMouseUpAction=[!WriteKeyValue Variables Vis 0][!DeactivateConfig "ClockWorld\Music Player\Visualizer" "Visualizer.ini"][!Refresh]

[TickOff1]
Meter=Shape
Shape=Rectangle 290,110,49,21,10 | Fill Color 255,255,255,0 | Stroke Color #OMode#,255 | StrokeWidth 2
Shape2=Ellipse 302,120,6 | FillColor #OMode# | StrokeWidth 0
Hidden=1
LeftMouseUpAction=[!WriteKeyValue Variables Vis 1][!ActivateConfig "ClockWorld\Music Player\Visualizer" "Visualizer.ini"][!Refresh]

[MeasureVisualizer]
Measure=Calc
Formula=1
UpdateDivider=-1
DynamicVariables=1
IfCondition=#Vis# = 1
IfTrueAction=[!ShowMeter TickOn1][!HideMeter TickOff1]
IfCondition2=#Vis#=0
IfTrueAction2=[!ShowMeter TickOff1][!HideMeter TickOn1]






[ChangeBarNumber]
Meter=String
Text=Bar Number
FontFace=#Font#
FontSize=16
FontColor=#Accent#
StringAlign=Left
AntiAlias=1
X=50
Y=175
SolidColor=0,0,0,1
InlineSetting=CharacterSpacing | 1 | 1

[ChangeBarNumberBox]
Meter=Shape
Shape=Rectangle #X#,200,50,2 | FillColor #Accent# | Stroke Color 255, 255, 255, 0

[InputVisBarNumber]
Meter=String
Text=#BarCount#
X=(#X# + 25)
Y=170
StringAlign=Center
FontFace=#MusicFont#
FontColor=#OMode#
FontSize=17
AntiAlias=1
LeftMouseUpAction=[!CommandMeasure MeasureBarNumber "ExecuteBatch 1"]
MouseOverAction=[!CommandMeasure MeasureInputVisBarNumberSize "Stop 2"][!CommandMeasure MeasureInputVisBarNumberSize "Execute 1"]
MouseLeaveAction=[!CommandMeasure MeasureInputVisBarNumberSize "Stop 1"][!CommandMeasure MeasureInputVisBarNumberSize "Execute 2"]

[MeasureInputVisBarNumberSize]
Measure=Plugin
Plugin=#Plugin#
ActionList1=Repeat ChangeImageSize,10,5
ChangeImageSize=[!SetOption InputVisBarNumber Y "(Clamp([InputVisBarNumber:Y]-1,165,170))"][!Update][!UpdateMeter InputVisBarNumber][!Redraw]
ActionList2=Repeat ChangeImageSize1,10,5
ChangeImageSize1=[!SetOption InputVisBarNumber Y "(Clamp([InputVisBarNumber:Y]+1,165,170))"][!Update][!UpdateMeter InputVisBarNumber][!Redraw]

[MeasureBarNumber]
Measure=Plugin
Plugin=InputText
X=#X#
Y=155
W=50
H=40
InputLimit=3
InputNumber=1
DefaultValue=#BarCount#
FontFace=#MusicFont#
FontColor=#OMode#
StringAlign=Center
FontSize=17
SolidColor=#CMode#,255
AntiAlias=1 
FocusDismiss=1
UpdateDivider=-1
command1=[!WriteKeyValue Variables BarCount "$UserInput$" "#@#Variables.ini"][!Refresh "ClockWorld\Music Player\Visualizer" "Visualizer.ini"][!Refresh]
DynamicVariables=1





[ChangeBarHeight]
Meter=String
Text=Bar Height
FontFace=#Font#
FontSize=16
FontColor=#Accent#
StringAlign=Left
AntiAlias=1
X=50
Y=250
SolidColor=0,0,0,1
InlineSetting=CharacterSpacing | 1 | 1

[ChangeBarHeightBox]
Meter=Shape
Shape=Rectangle #X#,275,50,2 | FillColor #Accent# | Stroke Color 255, 255, 255, 0

[InputVisBarHeight]
Meter=String
Text=#BarHeight#
X=(#X# + 25)
Y=245
StringAlign=Center
FontFace=#MusicFont#
FontColor=#OMode#
FontSize=17
AntiAlias=1
LeftMouseUpAction=[!CommandMeasure MeasureBarHeight "ExecuteBatch 1"]
MouseOverAction=[!CommandMeasure MeasureInputVisBarHeightSize "Stop 2"][!CommandMeasure MeasureInputVisBarHeightSize "Execute 1"]
MouseLeaveAction=[!CommandMeasure MeasureInputVisBarHeightSize "Stop 1"][!CommandMeasure MeasureInputVisBarHeightSize "Execute 2"]

[MeasureInputVisBarHeightSize]
Measure=Plugin
Plugin=#Plugin#
ActionList1=Repeat ChangeImageSize,10,5
ChangeImageSize=[!SetOption InputVisBarHeight Y "(Clamp([InputVisBarHeight:Y]-1,240,245))"][!Update][!UpdateMeter InputVisBarHeight][!Redraw]
ActionList2=Repeat ChangeImageSize1,10,5
ChangeImageSize1=[!SetOption InputVisBarHeight Y "(Clamp([InputVisBarHeight:Y]+1,240,245))"][!Update][!UpdateMeter InputVisBarHeight][!Redraw]

[MeasureBarHeight]
Measure=Plugin
Plugin=InputText
X=#X#
Y=230
W=50
H=40
InputLimit=3
InputNumber=1
DefaultValue=#BarHeight#
FontFace=#MusicFont#
FontColor=#OMode#
StringAlign=Center
FontSize=17
SolidColor=#CMode#
AntiAlias=1 
FocusDismiss=1
UpdateDivider=-1
command1=[!WriteKeyValue Variables BarHeight "$UserInput$" "#@#Variables.ini"][!Refresh "ClockWorld\Music Player\Visualizer" "Visualizer.ini"][!Refresh]
DynamicVariables=1

[TextPixels]
Meter=String
Text=px
X=(#X# + 70)
Y=250
StringAlign=Center
FontFace=#Font#
FontColor=#Accent#
FontSize=14
AntiAlias=1











[TextAdvanced]
Meter=String
Text=Advanced
x=310
Y=450
FontColor=#OMode#
FontSize=18
FontFace=#Font#
AntiAlias=1
StringAlign=Center
LeftMouseUpAction=[#@#variables.ini]
InlineSetting=CharacterSpacing | 1 | 1
MouseOverAction=[!CommandMeasure MeasureTextAdvancedSize "Stop 2"][!CommandMeasure MeasureTextAdvancedSize "Execute 1"]
MouseLeaveAction=[!CommandMeasure MeasureTextAdvancedSize "Stop 1"][!CommandMeasure MeasureTextAdvancedSize "Execute 2"]

[MeasureTextAdvancedSize]
Measure=Plugin
Plugin=#Plugin#
ActionList1=Repeat ChangeImageSize,10,5
ChangeImageSize=[!SetOption TextAdvanced Y "(Clamp([TextAdvanced:Y]-1,445,450))"][!Update][!UpdateMeter TextAdvanced][!Redraw]
ActionList2=Repeat ChangeImageSize1,10,5
ChangeImageSize1=[!SetOption TextAdvanced Y "(Clamp([TextAdvanced:Y]+1,445,450))"][!Update][!UpdateMeter TextAdvanced][!Redraw]


[TextCustom]
Meter=String
Text=That's all for now. We will keep adding new features based on your feedback.
FontFace=#MusicFont#
FontSize=14
FontColor=#Accent#
StringAlign=Center
AntiAlias=1
X=310
Y=340
InlineSetting=CharacterSpacing | 1 | 1
ClipString=2
W=450
H=100
